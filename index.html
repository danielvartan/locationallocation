<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Maximal Coverage Location-Allocation Using Geospatial Data • locationallocation</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<!-- mathjax math --><script src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script><script>
  window.MathJax = {
    chtml: {
      fontURL: "https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/output/chtml/fonts/woff-v2"
    }
  };
</script><script src="lightswitch.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Maximal Coverage Location-Allocation Using Geospatial Data">
<meta name="description" content="Functions to perform Maximal Coverage Location-Allocation analyses using geospatial data. It is designed to help decision-makers optimally allocate resources and facilities in various contexts, such as public health, emergency response, and urban planning.">
<meta property="og:description" content="Functions to perform Maximal Coverage Location-Allocation analyses using geospatial data. It is designed to help decision-makers optimally allocate resources and facilities in various contexts, such as public health, emergency response, and urban planning.">
<meta property="og:image" content="https://giacfalk.github.io/locationallocation/reference/figures/og-image.png">
<meta property="og:image:alt" content="locationallocation">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">locationallocation</a>

    <small class="nav-text text-warning me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/giacfalk/locationallocation/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.svg" class="logo" alt=""><h1 id="locationallocation-">locationallocation 
<a class="anchor" aria-label="anchor" href="#locationallocation-"></a>
</h1>
</div>
<!-- quarto render -->
<!-- Install the package before rendering this file: `devtools::install()` -->
<!-- badges: start -->

<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>Assessing and planning infrastructure and service networks, given a dispersed demand, limited capacity, accessibility targets, and concerns about spatial justice, is a central policy challenge. Problems of this type are commonly referred to as <em>Maximal Coverage Location-Allocation</em> (MCLA) spatial optimization problems.</p>
<p><code>locationallocation</code> is an R package that provides tools for solving MCLA problems with geospatial data. It builds on widely used spatial libraries in R, follows <a href="https://tidyverse.tidyverse.org/articles/manifesto.html" class="external-link">tidyverse principles</a>, and integrates seamlessly with the broader <a href="https://tidyverse.org/" class="external-link">tidyverse ecosystem</a>. The package can generate travel-time maps and optimize the placement of facilities or infrastructure according to accessibility criteria, which can be weighted by one or more variables or by a user-defined function.</p>
<p>Potential applications of the package extend to the domains of public infrastructure assessment and planning (public services provision, e.g. transport, social services, healthcare, parks), urban environmental and climate risk reduction interventions, logistics and hubs allocation, commercial and strategic decisions.</p>
<blockquote>
<p>If you find this project useful, please consider giving it a star!   <a href="https://github.com/giacfalk/locationallocation/" class="external-link"><img src="https://img.shields.io/github/stars/giacfalk/locationallocation" alt="GitHub Repository Stars"></a></p>
</blockquote>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install <code>locationallocation</code> using the <a href="https://github.com/r-lib/remotes" class="external-link"><code>remotes</code></a> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages(remotes)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"giacfalk/locationallocation"</span><span class="op">)</span></span></code></pre></div>
<p>A <a href="https://cran.r-project.org/" class="external-link">CRAN</a> version of the package is planned for the near future.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>To use the package, start by loading it to your R session using the <code>library</code> function:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://giacfalk.github.io/locationallocation/">locationallocation</a></span><span class="op">)</span></span></code></pre></div>
<p>As an example, we demonstrate how the package can address urban-scale climate risk through infrastructure assessment and geospatial planning. For this demonstration, we use the demo datasets included with the package.</p>
<p>These datasets include the coordinates of public drinking water fountains (blue dots) in Naples, Italy (<a href="https://giacfalk.github.io/locationallocation/reference/naples_fountains.html"><code>naples_fountains</code></a>); a gridded population raster from the Global Human Settlement Layer (<a href="https://human-settlement.emergency.copernicus.eu" class="external-link">GHSL</a>) Population Grid (<a href="https://human-settlement.emergency.copernicus.eu/download.php?ds=pop" class="external-link">GHS-POP</a>) (<a href="https://giacfalk.github.io/locationallocation/reference/naples_population.html"><code>naples_population</code></a>); a 100-meter resolution heat hazard map, representing the number of days with <a href="https://en.wikipedia.org/wiki/Wet-bulb_globe_temperature" class="external-link">Wet-Bulb Globe Temperature</a> above 25°C during 2008–2017, obtained from the <a href="https://www.urban-climate.eu/model" class="external-link">UrbClim</a> model (<a href="https://giacfalk.github.io/locationallocation/reference/naples_hot_days.html"><code>naples_hot_days</code></a>); and the city’s administrative boundaries (<a href="https://giacfalk.github.io/locationallocation/reference/naples_shape.html"><code>naples_shape</code></a>).</p>
<p><img src="reference/figures/existing-facilities-1.png"></p>
<p>We can use the <a href="https://giacfalk.github.io/locationallocation/reference/traveltime.html"><code>traveltime()</code></a> function to create a map of current accessibility to the facility points (represented by the <a href="https://r-spatial.github.io/sf/" class="external-link"><code>sf</code></a> object <a href="https://giacfalk.github.io/locationallocation/reference/naples_fountains.html"><code>naples_fountains</code></a>) within the specified geographical boundaries. The function allows the user to select a travel mode (walking or fastest route) and an output spatial resolution in meters, achieved through <a href="https://doi.org/10.1016/j.cageo.2011.08.021" class="external-link">dissevering spatial downscaling techniques</a>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traveltime_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_fountains</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/traveltime.html">traveltime</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    dowscaling_model_type <span class="op">=</span> <span class="st">"lm"</span>,</span>
<span>    mode <span class="op">=</span> <span class="st">"walk"</span>,</span>
<span>    res_output <span class="op">=</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>Once <a href="https://giacfalk.github.io/locationallocation/reference/traveltime.html"><code>traveltime()</code></a> has completed, the resulting layer can be visualized using the <a href="https://giacfalk.github.io/locationallocation/reference/traveltime_plot.html"><code>traveltime_plot()</code></a> function.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traveltime_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/traveltime_plot.html">traveltime_plot</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    contour_traveltime <span class="op">=</span> <span class="fl">15</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/traveltime-plot-1.png"></p>
<p>We can also generate a summary plot and compute statistics using the output of the <a href="https://giacfalk.github.io/locationallocation/reference/traveltime.html"><code>traveltime()</code></a> function, together with a demand raster (e.g., population density) and a specified time threshold, using the <a href="https://giacfalk.github.io/locationallocation/reference/traveltime_stats.html"><code>traveltime_stats</code></a> function:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">traveltime_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/traveltime_stats.html">traveltime_stats</a></span><span class="op">(</span></span>
<span>    demand <span class="op">=</span> <span class="va">naples_population</span>,</span>
<span>    breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">30</span><span class="op">)</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; ℹ 85.45148% of coverage within the 15 minutes threshold.</span></span></code></pre></div>
<p><img src="reference/figures/traveltime-stats-1.png"></p>
<p>We can now use the <a href="https://giacfalk.github.io/locationallocation/reference/allocation.html"><code>allocation()</code></a> function to optimize the placement of new water fountains, ensuring that (virtually) everyone (i.e., the full extent of the raster layer specified by the <code>demand</code> parameter) can reach one within 15 minutes, as defined by the <code>objectiveminutes</code> parameter:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation.html">allocation</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="va">traveltime_data</span>,</span>
<span>    weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>    heur <span class="op">=</span> <span class="st">"max"</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">#&gt; ✔ Target coverage share of 99% attained with 28 facilities within the 15</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="co">#&gt; minutes threshold. The achieved coverage share is 99.03953%.</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-1-1.png"></p>
<p>Note that it is also possible to solve an allocation problem using the <code>weights</code> parameter, which assigns greater relative importance or priority to areas where demand overlaps with weighting factors defined by another raster layer, such as exposure to hot days, as shown in the following example:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation.html">allocation</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="va">traveltime_data</span>,</span>
<span>    weights <span class="op">=</span> <span class="va">naples_hot_days</span>, <span class="co"># &lt;--- Changed</span></span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>    heur <span class="op">=</span> <span class="st">"max"</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">#&gt; ✔ Target coverage share of 99% attained with 25 facilities within the 15</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">#&gt; minutes threshold. The achieved coverage share is 99.16903%.</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-2-1.png"></p>
<p>It is also possible to apply normalization and exponentiation to different demand and weighting layers, enhancing their relative influence on the allocation, using the <code>approach</code>, <code>exp_demand</code>, and <code>exp_weights</code> parameters (see the <a href="https://giacfalk.github.io/locationallocation/reference/allocation.html">function documentation</a> for details):</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation.html">allocation</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="va">traveltime_data</span>,</span>
<span>    weights <span class="op">=</span> <span class="va">naples_hot_days</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="fl">0.99</span>,</span>
<span>    heur <span class="op">=</span> <span class="st">"max"</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">2</span>, <span class="co"># &lt;--- Changed</span></span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">#&gt; ✔ Target coverage share of 99% attained with 9 facilities within the 15</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="co">#&gt; minutes threshold. The achieved coverage share is 99.15597%.</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-3-1.png"></p>
<p>A variant of the allocation problem arises when the set of candidate locations for new facilities is <strong>discrete</strong>, rather than <strong>continuous</strong> across the study area as in the previous example.</p>
<p>In this case, the user must provide a set of candidate points via the <code>candidate</code> parameter of the <a href="https://giacfalk.github.io/locationallocation/reference/allocation_discrete.html"><code>allocation_discrete()</code></a> function, along with the maximum number of facilities that can be selected (<code>n_fac</code> parameter). The function applies a quasi-optimality heuristic based on a randomization approach, where the number of replications (<code>n_samples</code> parameter) gradually approaches the global optimum, although computational time increases linearly. As with the continuous allocation problem, a weight layer and normalization and exponentiation parameters can also be specified.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation_discrete.html">allocation_discrete</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    candidate <span class="op">=</span> <span class="va">naples_shape</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html" class="external-link">st_sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    n_fac <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    n_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="va">traveltime_data</span>,</span>
<span>    weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    par <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">#&gt; ℹ 5 facilities allocated within the 15 minutes threshold. The maximum</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="co">#&gt; coverage share attained was 88.76062%.</span></span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-4-1.png"></p>
<p>Now consider a scenario where the user wants to choose up to <code>n_fac</code> facilities to meet a target <code>objectiveshare</code> of the total demand, assuming that level of coverage is actually attainable.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation_discrete.html">allocation_discrete</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    candidate <span class="op">=</span> <span class="va">naples_shape</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html" class="external-link">st_sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>    facilities <span class="op">=</span> <span class="va">naples_fountains</span>,</span>
<span>    n_fac <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    n_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="va">traveltime_data</span>,</span>
<span>    weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="fl">0.9</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    par <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">#&gt; ✔ Target coverage share of 90% attained with 2 facilities within the 15</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">#&gt; minutes threshold. The achieved coverage share is 90.20134%.</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-5-1.png"></p>
<p>Finally, consider a case with no preexisting facilities. The discrete location-allocation problem must then identify where to place new facilities to cover as much demand as possible, given the limited set of spatial options and the cap on how many facilities can be allocated.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">allocation_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">naples_population</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/allocation_discrete.html">allocation_discrete</a></span><span class="op">(</span></span>
<span>    bb_area <span class="op">=</span> <span class="va">naples_shape</span>,</span>
<span>    candidate <span class="op">=</span> <span class="va">naples_shape</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_sample.html" class="external-link">st_sample</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>    facilities <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    n_fac <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    n_samples <span class="op">=</span> <span class="fl">100</span>,</span>
<span>    traveltime <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    objectiveminutes <span class="op">=</span> <span class="fl">15</span>,</span>
<span>    objectiveshare <span class="op">=</span> <span class="fl">0.45</span>,</span>
<span>    approach <span class="op">=</span> <span class="st">"norm"</span>,</span>
<span>    exp_demand <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    exp_weights <span class="op">=</span> <span class="fl">1</span>,</span>
<span>    par <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co">#&gt; ✔ Target coverage share of 45% attained with 2 facilities within the 15</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">#&gt; minutes threshold. The achieved coverage share is 46.40227%.</span></span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allocation_data</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/allocation_plot.html">allocation_plot</a></span><span class="op">(</span><span class="va">naples_shape</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/allocation-plot-6-1.png"></p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>If you use this package in your research, please cite it to acknowledge the effort put into its development and maintenance. Your citation helps support its continued improvement.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/citation.html" class="external-link">citation</a></span><span class="op">(</span><span class="st">"locationallocation"</span><span class="op">)</span></span>
<span><span class="co">#&gt; To cite locationallocation in publications use:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   Falchetta, G. (2025). locationallocation: Solving Maximal Coverage</span></span>
<span><span class="co">#&gt;   Location-Allocation geospatial infrastructure assessment and</span></span>
<span><span class="co">#&gt;   planning problems [Preprint, manuscript submitted for</span></span>
<span><span class="co">#&gt;   publication]. EarthArXiv. https://doi.org/10.31223/X5XQ69</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A BibTeX entry for LaTeX users is</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;   @Article{falchetta2025,</span></span>
<span><span class="co">#&gt;     title = {locationallocation: Solving Maximal Coverage Location-Allocation geospatial infrastructure assessment and planning problems},</span></span>
<span><span class="co">#&gt;     author = {Giacomo Falchetta},</span></span>
<span><span class="co">#&gt;     year = {2025},</span></span>
<span><span class="co">#&gt;     journal = {EarthArXiv},</span></span>
<span><span class="co">#&gt;     doi = {10.31223/X5XQ69},</span></span>
<span><span class="co">#&gt;     langid = {en},</span></span>
<span><span class="co">#&gt;     note = {Preprint, manuscript submitted for publication},</span></span>
<span><span class="co">#&gt;   }</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p><a href="https://www.gnu.org/licenses/gpl-3.0" class="external-link"><img src="https://img.shields.io/badge/license-GPLv3-bd0000.svg"></a></p>
<pre class="text"><code>Copyright (C) 2025 Giacomo Falchetta

locationallocation is free software: you can redistribute it and/or modify it
under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any
later version.

This program is distributed in the hope that it will be useful, but WITHOUT ANY
WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
PARTICULAR PURPOSE. See the GNU General Public License for more details.

You should have received a copy of the GNU General Public License along with
this program. If not, see &lt;https://www.gnu.org/licenses/&gt;.</code></pre>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p><a href="https://www.contributor-covenant.org/version/3/0/code_of_conduct/" class="external-link"><img src="https://img.shields.io/badge/Contributor%20Covenant-3.0-4baaaa.svg"></a></p>
<p>Contributions are welcome! Whether you want to report bugs, suggest features, or improve the code or documentation, your input is highly valued. Please check the <a href="https://github.com/giacfalk/locationallocation/issues" class="external-link">issues tab</a> for existing issues or to open a new one.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/giacfalk/locationallocation/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/giacfalk/locationallocation/issues/" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing locationallocation</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://github.com/giacfalk/" class="external-link">Giacomo Falchetta</a> <br><small class="roles"> Author, maintainer, conceptor, copyright holder </small> <a href="https://orcid.org/0000-0003-2607-2195" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/giacfalk/" class="external-link">Giacomo Falchetta</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
